webpackJsonp([7],{IP0f:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("BO1k"),a=n.n(r),o=n("60Of"),i=n("b/bh");window.AudioContext=window.AudioContext||window.webkitAudioContext;var s=null,l=null,c=null,u=.04,v=!1,f=null,d=null,h=!0,g={note:"-",pitch:"-",detune:"-",notes:[],play:function(){var t=0,e=s.currentTime,n=setInterval(function(){g.notes[t]&&g.notes[t].time<=s.currentTime-e&&(console.log(g.notes[t].time),i.a.note(g.notes[t].notes+"q").play(),t++),t==g.notes.length&&clearInterval(n)},50)},toString:function(){var t="{ ",e=!0,n=!1,r=void 0;try{for(var o,i=a()(g.notes);!(e=(o=i.next()).done);e=!0){t+=o.value.notes.toString()+", "}}catch(t){n=!0,r=t}finally{try{!e&&i.return&&i.return()}finally{if(n)throw r}}return t+="}"}};function _(){alert("Stream generation failed.")}function b(t){c=s.createMediaStreamSource(t),(l=s.createAnalyser()).fftSize=2048,c.connect(l),F()}function p(){!function(t,e){try{navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,navigator.getUserMedia(t,e,_)}catch(t){alert("getUserMedia threw exception :"+t)}}({audio:{mandatory:{googEchoCancellation:"false",googAutoGainControl:"false",googNoiseSuppression:"false",googHighpassFilter:"false"},optional:[]}},b)}window.onload=function(){return s=new AudioContext,Math.max(4,Math.floor(s.sampleRate/5e3)),!1};var m=new Float32Array(2048),w=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function M(t,e){return Math.floor(1200*Math.log(t/function(t){return 440*Math.pow(2,(t-69)/12)}(e))/Math.log(2))}var y=!1,A=[],C=[];function q(t,e){for(var n=t.length,r=0,a=0;a<n;a++){var i=t[a];r+=i*i}if((r=Math.sqrt(r/n))<u)return y&&(A.length>5&&(g.notes.push({notes:Object(o.b)(A)+function(t){for(var e={},n=0,r=void 0,a=void 0,i=0;i<t.length;i++)a=Object(o.c)(t[i]),void 0===e[a]?e[a]=1:e[a]++,e[a]>n&&(n=e[a],r=a);return parseInt(r)}(C),time:d-f}),console.log(d-f)),h=!0,A.length=0,C.length=0,y=!1),-1;var s=0,l=n-1;for(a=0;a<n/2;a++)if(Math.abs(t[a])<.2){s=a;break}for(a=1;a<n/2;a++)if(Math.abs(t[n-a])<.2){l=n-a;break}n=(t=t.slice(s,l)).length;var c=new Array(n).fill(0);for(a=0;a<n;a++)for(var v=0;v<n-a;v++)c[a]=c[a]+t[v]*t[v+a];for(var _=0;c[_]>c[_+1];)_++;var b=-1,p=-1;for(a=_;a<n;a++)c[a]>b&&(b=c[a],p=a);var m=p,w=c[m-1],M=c[m],q=c[m+1],F=(w+q-2*M)/2;return F&&(m-=(q-w)/2/(2*F)),e/m}function F(t){new Array;if(l){l.getFloatTimeDomainData(m);var e,n,r=q(m,s.sampleRate);if(-1!=r){0==v&&(f=s.currentTime),v=!0,y=!0,g.frequency=Math.round(r);var a=(e=r,n=Math.log(e/440)/Math.log(2)*12,Math.round(n)+69);g.note=w[a%12];var o=M(r,a);g.detune=o,A.push(w[a%12]),C.push(g.frequency),h&&(d=s.currentTime,h=!1)}window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame),window.requestAnimationFrame(F)}}function k(){v=!1,g.notes.length=0}var I={data:function(){return{toggleLiveInput:p,piano:i.a,timer:null,pitch_data:g,cached_notes:A,cached_frequencies:C,reset:k}},components:{navigation:n("bwGm").a},methods:{getNote:function(){var t=this,e=0;this.timer=setInterval(function(){t.piano.note(t.pitch_data.notes[e]+"q").play(),++e==g.notes.length&&clearInterval(t.timer)},500)},stop:function(){clearInterval(this.timer)},resetData:function(){this.reset}}},S={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("navigation"),t._v(" "),n("br"),n("br"),t._v(" "),n("v-btn",{staticClass:"general-btn",attrs:{color:"orange"},on:{click:t.toggleLiveInput}},[t._v("use live input")]),t._v(" "),n("v-btn",{staticClass:"general-btn",attrs:{color:"orange"},on:{click:t.reset}},[t._v("Reset")]),t._v(" "),n("br"),n("br"),t._v(" "),n("span",[t._v("Note: "+t._s(t.pitch_data.note)+" ")]),t._v(" "),n("br"),n("br"),n("br"),t._v(" "),n("span",[t._v("Frquency: "+t._s(t.pitch_data.pitch))]),t._v(" "),n("br"),n("br"),n("br"),t._v(" "),n("span",[t._v("Cents: "+t._s(t.pitch_data.detune))]),t._v(" "),n("br"),n("br"),n("br"),t._v(" "),n("span",[t._v("Notes: "+t._s(t.pitch_data.toString()))]),t._v(" "),n("br"),n("br"),n("br"),n("br"),t._v(" "),n("span",[t._v("Cached Notes: "+t._s(t.cached_notes))]),t._v(" "),n("br"),n("br"),n("br"),n("br"),t._v(" "),n("span",[t._v("Cached Frequencies: "+t._s(t.cached_frequencies))]),t._v(" "),n("br"),n("br"),t._v(" "),n("v-btn",{staticClass:"general-btn",attrs:{color:"green"},on:{click:t.pitch_data.play}},[t._v("Play!")]),t._v(" "),n("v-btn",{staticClass:"general-btn",attrs:{color:"red"},on:{click:t.stop}},[t._v("Stop")])],1)},staticRenderFns:[]};var x=n("VU/8")(I,S,!1,function(t){n("MIjy")},null,null);e.default=x.exports},MIjy:function(t,e){}});
//# sourceMappingURL=7.ef1ffcf0a748c6a56e75.js.map